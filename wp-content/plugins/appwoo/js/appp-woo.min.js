!function(a,b,c,d){if("undefined"!=typeof a.apppresser&&a.apppresser){apppresser.paypal={},apppresser.wooswipe={};var e=apppresser.paypal;apppresser.wooswiper=function(a){a="undefined"!=typeof a?a:c(".product-gallery"),a.animate({opacity:"1"},"slow"),c("img",a).length<2||(apppresser.wooswipe=a.swiper({pagination:".pagination",mode:"horizontal",calculateHeight:!0,loop:!0,paginationClickable:!0}))},e.Checkout=function(){if(console.log("paypal.Checkout"),apppwoo.do_paypal){var b=c("form.checkout"),f="undefined"==typeof wc_checkout_params?woocommerce_params.checkout_url:wc_checkout_params.checkout_url;if("undefined"==typeof f&&(f=apppwoo.checkout_url+"?wc-ajax=checkout&appp="+apppCore.ver),b.length)switch(console.log("checkout_url",f),e.inAppBrowser=function(b){var c=a.location.host,d=apppCore.is_appp_true?apppCore.is_appp_true:"1",e=apppwoo.cart_url+"?appp="+d,f="",g=function(a){apppresser.log("checkout_place_order loadstopEvent",{url:a.url});var d=a.url.split("?")[0];c&&d.indexOf(c)>=0&&(f=a.url,b.close())},h=function(c){apppresser.log("checkout_place_order exit",c),a.location.href=f?f:e,b.removeEventListener("loadstop",g),b.removeEventListener("exit",h)};b.addEventListener("loadstop",g),b.addEventListener("exit",h)},e.successHandler=function(d){var f="";try{if(d.indexOf("<!--WC_START-->")>=0&&(d=d.split("<!--WC_START-->")[1]),d.indexOf("<!--WC_END-->")>=0&&(d=d.split("<!--WC_END-->")[0]),f=c.parseJSON(d),"undefined"==typeof f.result||"success"!=f.result)throw"failure"==f.result?"Result failure":"Invalid response";if(apppresser.log("result success",f),"1"==apppCore.ver){var g=a.open(f.redirect,"_blank");g&&e.inAppBrowser(g)}else{apppresser.paypal.redirect=f.redirect,parent.postMessage("paypal_place_order","*");var h={paypal_url:f.redirect,redirect:a.apppwoo.cart_url};parent.postMessage(JSON.stringify(h),"*")}}catch(i){c(".woocommerce-error, .woocommerce-message").remove(),f.messages?b.prepend(f.messages):b.prepend(d),b.removeClass("processing").unblock(),c(".ajax-spinner").hide(),b.find(".input-text, select").blur(),c("html, body, #main").animate({scrollTop:b.offset().top-100},1e3),"true"==f.refresh&&c("body").trigger("update_checkout"),c("body").trigger("checkout_error")}},e.checkoutOverride=function(){if(apppresser.log("checkpayment_type",c("input[name=payment_method]:checked",b).length,c("input[name=payment_method]:checked",b).val()),"paypal"===c("input[name=payment_method]:checked",b).val()){b.addClass("processing");var a=b.data();return 1!=a["blockUI.isBlocked"]&&(b.block({message:null,css:{backgroundColor:"#fff",opacity:.6}}),c(".ajax-spinner").show(),setTimeout(function(){c(".ajax-spinner").hide()},1e4)),c.ajax({type:"POST",url:f,data:b.serialize(),success:e.successHandler,dataType:"html"}),!1}},console.log("Add submit listener only once"),e.form_override_events=c._data(b[0],"events"),!0){case e.form_override_events===d:case 0===e.form_override_events.length:case-1!==c.inArray(e.checkoutOverride,e.form_override_events.submit):console.log("Add submit listener only once (ADDED!!!)"),b.on("submit",e.checkoutOverride)}}},apppresser.wooappInit=function(){console.log("wooappinit"),apppresser.wooswiper(),e.Checkout(),apppresser.checkoutInit(),apppresser.backhref=a.apppwoo&&apppwoo.is_shop?apppwoo.shop_url:apppresser.home_url,c("body").on("click","ul.products li a, a.module, a.setting, .cart-items a, .panel-toggle a, a.panel-toggle, .product a",function(a){$self=c(this),!c("body").hasClass("single"),$selector=c("#main"),apppresser.woocall=!0,"function"==typeof apppresser.canAjax&&apppresser.canAjax($self)&&apppresser.loadAjaxContent($self.attr("href"),$selector,a),(!apppresser.isWidth600&&apppresser.snapper&&apppresser.snapper.state().state==apppresser.lr_snap||"undefined"!=typeof apppresser.sticky_ion_menu&&apppresser.sticky_ion_menu===!1)&&apppresser.snapper.close()})},apppresser.wooappAjaxDone=function(a,b,c){function d(a){a||apppresser.log("wooappAjaxDone variations exist?",e.length,f.length),e.length&&f.length&&(apppresser.log("loop_count = ",a,"$.wc_variation_form =",typeof b.fn.wc_variation_form),"function"==typeof b.fn.wc_variation_form?(e.wc_variation_form(),f.change()):a++<=5&&setTimeout(function(){d(a)},500))}if(apppresser.checkoutInit(),apppresser.woocall){apppresser.wooswiper(b(".product-gallery",c)),wooinit();var e=b(".variations_form"),f=b(".variations_form .variations select");d(0)}},apppresser.checkoutInit=function(){jQuery("body").hasClass("woocommerce-checkout")&&(console.log("paypal.Checkout call"),c=jQuery,apppresser.paypal.Checkout())},apppresser.addCheckoutAjaxLogin=function(){c("body").hasClass("woocommerce-checkout")&&c("body.not-logged-in .woocommerce-info .showlogin").removeClass("showlogin").addClass("no-ajax io-modal-open").attr("href","#loginModal")}}}(window,document,jQuery),jQuery(document).ready(apppresser.wooappInit).bind("load_ajax_content_done",apppresser.wooappAjaxDone),jQuery(document).on("ready load_ajax_content_done",apppresser.addCheckoutAjaxLogin),jQuery("body").hasClass("woocommerce-checkout")&&(console.log("paypal.Checkout call"),$=jQuery,apppresser.paypal.Checkout());